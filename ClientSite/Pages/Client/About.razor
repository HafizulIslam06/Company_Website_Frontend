@page "/about"
@using ClientSite.Models
@using ClientSite.Services
@inject AboutService AboutService
@using ClientSite.Pages.Components

<section class="about-section py-5">
    <div class="container">
        @if (isLoading)
        {
            <p class="text-center text-primary">Loading...</p>
        }
        else if (aboutSection == null)
        {
            <p class="text-center text-danger">About section not available.</p>
        }
        else
        {
            <div class="text-center mb-5">
                <h1 class="fw-bold base-title-color">
                    About <span class="base-title-color">Bits Bangla</span>
                </h1>
                <p class="text-muted w-75 mx-auto" style="font-size:1.2rem; line-height:1.8;">
                    @aboutSection.Description
                </p>
            </div>

            <div class="row align-items-center mb-5">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <div class="video-wrapper position-relative rounded-4 overflow-hidden shadow-lg">
                        @if (!string.IsNullOrEmpty(aboutSection.ImageUrl))
                        {
                            <img src="@aboutSection.ImageUrl" alt="@aboutSection.Title" class="img-fluid w-100" />
                        }
                        @if (!string.IsNullOrEmpty(aboutSection.VideoUrl))
                        {
                            <button class="play-btn position-absolute top-50 start-50 translate-middle rounded-circle shadow"
                                    data-bs-toggle="modal" data-bs-target="#aboutVideoModal">
                                <i class="bi bi-play-fill fs-2 text-white"></i>
                            </button>
                        }
                    </div>
                </div>

                <div class="col-lg-6">
                    <h3 class="fw-bold base-title-color mb-3">@aboutSection.Title</h3>
                    <p class="text-muted" style="font-size:1.1rem; line-height:1.7;">
                        We are a Bangladeshi tech company crafting intelligent, scalable, and beautiful digital solutions.
                        Helping businesses go from ideas to impact.
                    </p>
                    <a href="/contact" class="btn  mt-3 px-4 py-2">
                        <i class="bi bi-envelope-paper me-2"></i> Get in Touch
                    </a>
                </div>
            </div>

            <div class="row text-center mb-5">
                <div class="col-md-4 mb-3">
                    <div class="about-stat shadow">
                        <h3 class="fw-bold">4+</h3>
                        <p>Years of Experience</p>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="about-stat shadow">
                        <h3 class="fw-bold">100+</h3>
                        <p>Projects Completed</p>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="about-stat shadow" style="background: linear-gradient(135deg, #c8102e, #ff4d4d);">
                        <h3 class="fw-bold">50+</h3>
                        <p>Happy Clients</p>
                    </div>
                </div>                   
            </div>
        }             
    </div>
</section>

<div class="bg-light">
    <WhyChooseUs />
</div>

<Products />

<!-- Contact Section -->
<div class="container contact-cta py-5 text-center rounded-4 shadow-lg mt-5 position-relative"
     style="background: linear-gradient(135deg, #4e73df, #6c63ff); overflow:hidden;">

    <div class="position-absolute top-0 start-0 w-100 h-100"
         style="background: radial-gradient(circle at 30% 50%, rgba(255,255,255,0.15), transparent 70%);">
    </div>

    <div class="position-relative">
        <h2 class="fw-bold mb-3 text-white">Let’s Build the Future Together 🚀</h2>
        <p class="lead mb-4 text-light">Have an idea or project in mind? Let’s make it happen with innovation, speed, and impact.</p>

        <a href="/contact" class="btn rounded-pill fw-bold px-5"
           style="background:#fff; color:#4e73df;">
            <i class="bi bi-chat-dots me-2"></i> Contact Us
        </a>
    </div>
</div>

@if (!string.IsNullOrEmpty(aboutSection?.VideoUrl))
{
    <div class="modal fade" id="aboutVideoModal" tabindex="-1" aria-labelledby="aboutVideoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content border-0 rounded-4 overflow-hidden">
                <div class="ratio ratio-16x9">
                    <iframe id="aboutVideo" src="@aboutSection.VideoUrl"
                            title="@aboutSection.Title"
                            allow="autoplay; encrypted-media"
                            allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </div>
}


@code {
    private AboutSection? aboutSection;
    private bool isLoading = true;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            var sections = await AboutService.GetAboutSectionsAsync();
            aboutSection = sections.FirstOrDefault();
        }
        finally
        {
            isLoading = false;
        }
    }
}